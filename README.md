# リアルタイム文字起こしと翻訳アプリ

faster-whisperを使用した音声文字起こしと自動翻訳アプリです。日本語と英語の音声に対応し、リアルタイムで字幕を表示します。

## 特徴

- 🎙️ **リアルタイム文字起こし**: faster-whisperを使用した高精度な音声認識
- 🎤 **マイク入力対応**: 会議やライブ音声をリアルタイムで文字起こし
- 🌐 **自動翻訳**: 日本語↔英語の自動翻訳機能
- 📺 **字幕表示**: 元の言語と翻訳を同時に表示
- 💾 **SRT出力**: 字幕ファイル（SRT形式）のダウンロード対応
- 🆓 **完全無料**: アカウント不要・課金不要
- 🚀 **簡単セットアップ**: Streamlitで簡単に起動

## 必要な環境

- Python 3.8以上
- ffmpeg（音声処理用）

## セットアップ

### 1. リポジトリのクローンまたはダウンロード

```bash
git clone <repository-url>
cd リアルタイム文字起こしと翻訳
```

### 2. 依存関係のインストール

```bash
pip install -r requirements.txt
```

### 3. ffmpegのインストール

#### Windows
```bash
# Chocolateyを使用する場合
choco install ffmpeg

# または公式サイトからダウンロード
# https://ffmpeg.org/download.html
```

#### macOS
```bash
brew install ffmpeg
```

#### Linux (Ubuntu/Debian)
```bash
sudo apt update
sudo apt install ffmpeg
```

## 使い方

### アプリの起動

```bash
streamlit run app.py
```

ブラウザが自動的に開き、アプリが表示されます。

### 基本的な使い方

#### ファイルアップロード方式

1. **音声ファイルのアップロード**
   - 「ファイルアップロード」タブを選択
   - 対応形式: WAV, MP3, M4A, FLAC, OGG, WEBM
   - サイドバーでモデルサイズや計算タイプを調整可能

2. **文字起こしの実行**
   - 「文字起こし開始」ボタンをクリック
   - 自動的に言語が検出されます（日本語または英語）

3. **翻訳の実行**
   - 「翻訳を実行」ボタンをクリック
   - 日本語音声 → 英語翻訳
   - 英語音声 → 日本語翻訳

4. **字幕の確認**
   - リアルタイム字幕プレビューで確認
   - 全字幕リストも表示可能

5. **字幕ファイルのダウンロード**
   - 翻訳付きSRT
   - 元の言語のみSRT
   - JSON形式

#### マイク入力方式（会議・ライブ対応）

1. **マイクから録音**
   - 「マイクから録音」タブを選択
   - ブラウザでマイクの使用許可を許可
   - 録音ボタンをクリックして音声を録音

2. **文字起こしと翻訳**
   - 「文字起こし開始」ボタンをクリック
   - 自動的に言語検出・文字起こし・翻訳が実行されます

3. **結果の確認**
   - 字幕が表示されます
   - SRTファイルとしてダウンロード可能

## モデルサイズについて

- **tiny**: 最も高速、精度は低め
- **base**: バランス型
- **small**: 推奨（デフォルト）
- **medium**: 高精度、処理がやや遅い
- **large**: 最高精度、処理が遅い

## トラブルシューティング

### ffmpegが見つからないエラー

ffmpegが正しくインストールされ、PATHに追加されているか確認してください。

```bash
ffmpeg -version
```

### メモリ不足エラー

モデルサイズを小さくする（tiny または base）か、計算タイプを int8 に設定してください。

### 翻訳エラー

deep-translatorはGoogle翻訳の非公式APIを使用しています。大量のリクエストを送信する場合、一時的に制限される可能性があります。その場合は、しばらく待ってから再試行してください。

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## GitHubでの共有方法

このアプリをGitHubで共有するには、以下の手順を実行してください。

### クイックスタート（Windows）

1. **`setup_git.bat`をダブルクリック**してGitを初期化
2. [GitHub](https://github.com)でリポジトリを作成
3. 以下のコマンドでプッシュ：
   ```bash
   git remote add origin https://github.com/あなたのユーザー名/リポジトリ名.git
   git push -u origin main
   ```

### 詳細な手順

詳細な手順は **`GITHUB_SETUP.md`** を参照してください。

主な共有方法：
- **方法1**: GitHubリポジトリにプッシュ（推奨）
- **方法2**: GitHub Desktopを使用（GUIで簡単）
- **方法3**: ZIPファイルで共有（GitHub不要）
- **方法4**: Streamlit Cloudで公開（Webアプリとして公開）

### 他の人が使用する方法

GitHubリポジトリのURLを共有したら、他の人は以下のコマンドで使用できます：

```bash
# リポジトリをクローン
git clone https://github.com/あなたのユーザー名/リポジトリ名.git

# ディレクトリに移動
cd リポジトリ名

# 依存関係をインストール
pip install -r requirements.txt

# アプリを起動
streamlit run app.py
```

## 注意事項

- deep-translatorはGoogle翻訳の非公式APIを使用しています。大量の翻訳リクエストは制限される可能性があります
- 初回起動時、Whisperモデルのダウンロードに時間がかかります（モデルサイズによって異なります）
- 音声ファイルのサイズが大きい場合、処理に時間がかかります
- CPUのみで動作するため、GPUがある場合はより高速に処理できます（faster-whisperはGPUを自動検出します）
- マイク入力機能はブラウザのマイクアクセス許可が必要です（HTTPS環境で推奨）

